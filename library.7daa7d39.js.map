{"mappings":"6mBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,uCC2BT,IAAAE,E,6EA5CA,IAAIC,EAAY,GA6BhB,SAASC,EAAWC,GAClB,OAAQ,GAAKA,GAAKC,QAAO,+DAAiE,MAAQ,G,CAcpGJ,EA1CA,SAA4BH,GAC1B,IAAIQ,EAAQJ,EAAUJ,GAOtB,OALKQ,IACHA,EAOJ,WACE,IACE,MAAM,IAAIN,K,CACV,MAAOO,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,yDAEpC,GAAIF,EAGF,OAAOL,EAAWK,EAAQ,G,CAI9B,MAAO,G,CApBGG,GACRT,EAAUJ,GAAMQ,GAGXA,C,KCZTM,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,qJCAzDH,EAAA,S,0DCAAI,EAAiBJ,EAAA,SAAAK,aAA6C,SAAWL,EAAA,SAAAM,QAA6C,UDStH,EAAAC,EAAAC,gBAEA,IAAMC,EAAYC,SAASC,cAAc,eAiBzC,SAASC,EAAUC,GACjB,IAAMC,EAAOC,aAAaC,QAAQH,GAClC,OAAIC,EAAaZ,KAAKC,MAAMW,GACrB,E,CAGT,SAASG,EAAaH,GACpB,IAAMI,EAASJ,EACZK,KAAI,SAAAC,G,IAIEC,EAHCC,EAAO,IAAIC,KAAKH,EAAGI,cACrBC,EAAa,GAgBjB,OAdc,QAATJ,EAAAD,EAAGM,cAAM,IAATL,OAAA,EAAAA,EAAWpC,QAWdwC,EAAaL,EAAGM,OAAOP,KAAI,SAAAQ,G,OAAOA,EAAJC,I,KAV9BR,EAAGS,UAAUC,SAAQ,SAAAC,GACPC,gBAAgBC,iBAAiBP,OACzCI,SAAQ,SAAAH,G,IAAGzC,EAAEyC,EAAFzC,GAAI0C,EAAID,EAAJC,KACb1C,IAAO6C,GACTN,EAAWS,KAAKN,E,OAItBH,EAAaA,EAAWU,MAAM,EAAG,IAK5B,iCAGSC,OAHwBhB,EAAGlC,GAAG,0GAOXkD,OAJnBhB,EAAGiB,YACJ,wJAMDD,OAHqBhB,EAAGkB,MAAM,0EAGHF,OAA3BX,EAAWc,KAAK,MAAM,OAAwBH,OAAnBd,EAAKkB,cAAc,sF,IAO7DD,KAAK,IAEFE,EAAe/B,SAASC,cAAc,mBACtC+B,EAAS,2FAAmGN,OAARhC,EAAQ,0CAClHqC,EAAaE,UAAYzB,GAAkBwB,C,CA9D7CzB,EAAaL,EAAU,YAEvBH,EAAUmC,iBAAiB,SAAS,SAAAC,GAClC,IAAMC,EAASD,EAAIC,OAAOC,QAAQ,UAClC,IAAKD,EAAQ,OAAO,EAEpB,IAAME,EAAYF,EAAOG,QAAQpC,KACjCiC,EACGC,QAAQ,MACRpC,cAAc,cACduC,UAAUC,OAAO,aACpBL,EAAOI,UAAUE,IAAI,aACrBnC,EAAaL,EAAUoC,G,IAsDvBK,OAAOT,iBAAiB,WAAW,SAAAC,GACjC,IAAMG,EAAYtC,SAASC,cAAc,0BAA0BsC,QAChEpC,KAEc,eAAbgC,EAAI/B,MACNG,EAAaL,EAAUoC,G,KAO7B,EAAAM,EAAAC,YACAF,OAAOT,iBAAiB,SAAUU,EAAAC,S","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-05794bef8d5de71b.js","src/library.js","node_modules/@parcel/runtime-js/lib/runtime-e497d3a61a3b9e8b.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2Y0K8\\\":\\\"library.7daa7d39.js\\\",\\\"fdBXP\\\":\\\"no-films.bd757f1e.png\\\",\\\"7nwxg\\\":\\\"library.a6faaccf.js\\\"}\"));","import './js/blinking-heart.js';\nimport './js/dark-mode';\n\nimport { hidePreloder, showPreloder } from './js/preloder';\nimport { scrollUp } from './js/scrollToTop.js';\n\nimport './js/modal-movie.js';\nimport * as noFilms from './img/no-films.png';\n\nhidePreloder();\n\nconst filterRef = document.querySelector('.js-filters');\n\ncreateMarkup(getMovies('watched'));\n\nfilterRef.addEventListener('click', evt => {\n  const target = evt.target.closest('button');\n  if (!target) return false;\n\n  const movieType = target.dataset.type;\n  target\n    .closest('ul')\n    .querySelector('.is-active')\n    .classList.remove('is-active');\n  target.classList.add('is-active');\n  createMarkup(getMovies(movieType));\n});\n\nfunction getMovies(type) {\n  const data = localStorage.getItem(type);\n  if (data) return JSON.parse(data);\n  return [];\n}\n\nfunction createMarkup(data) {\n  const markup = data\n    .map(el => {\n      const date = new Date(el.release_date);\n      let genres_ids = [];\n      // //\n      if (!el.genres?.length) {\n        el.genre_ids.forEach(el => {\n          const arr = filmsApiService.genres_ids_array.genres;\n          arr.forEach(({ id, name }) => {\n            if (id === el) {\n              genres_ids.push(name);\n            }\n          });\n        });\n        genres_ids = genres_ids.slice(0, 2);\n      } else {\n        genres_ids = el.genres.map(({ name }) => name);\n      }\n      //\n      return `<li class=\"gallery__item\" id=\"${el.id}\">\n            <a class=\"film-card\"\">\n                    <img src=\"https://image.tmdb.org/t/p/w500/${\n                      el.poster_path\n                    }\" \n                        class=\"film-poster__img\" loading=\"lazy\" />\n                <div class=\"info\"\">\n                <p class=\"info__title\">${el.title}</p>\n\n                  <p class=\"info__genres\">\n                  ${genres_ids.join(', ')} | ${date.getFullYear()} \n        \n               </p>\n            </div>\n            </a>\n      </li>`;\n    })\n    .join('');\n\n  const movieGallery = document.querySelector('.movie__gallery');\n  const noData = `<p class=\"my-lib__title\">Try to add some movies...</p> <img class=\"my-lib__poster\" src=\"${noFilms} alt=\"no film informatin\" width=\"640\">`;\n  movieGallery.innerHTML = markup ? markup : noData;\n}\n\nconst handleCloseModal = () => {\n  window.addEventListener('message', evt => {\n    const movieType = document.querySelector('.js-filters .is-active').dataset\n      .type;\n\n    if (evt.data === 'closeModal') {\n      createMarkup(getMovies(movieType));\n    }\n  });\n};\n\nhandleCloseModal();\n\nscrollUp();\nwindow.addEventListener('scroll', scrollUp);\n","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"fdBXP\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$20da63ae8e9a08df$exports","getBundleURL","resolve","$2T02J","hidePreloder","$cecbdd76f2d3d4bd$var$filterRef","document","querySelector","$cecbdd76f2d3d4bd$var$getMovies","type","data","localStorage","getItem","$cecbdd76f2d3d4bd$var$createMarkup","markup","map","el1","ref","date","Date","release_date","genres_ids","genres","param","name","genre_ids","forEach","el","filmsApiService","genres_ids_array","push","slice","concat","poster_path","title","join","getFullYear","movieGallery","noData","innerHTML","addEventListener","evt","target","closest","movieType","dataset","classList","remove","add","window","$bKWtT","scrollUp"],"version":3,"file":"library.7daa7d39.js.map"}