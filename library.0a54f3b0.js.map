{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAGMC,EAAM,+BACNC,EAAiB,UAEjBC,EAAO,CACXC,mBAAoBC,SAASC,cAAc,sBAC3CC,mBAAoBF,SAASC,cAAc,uBAC3CE,SAAUH,SAASC,cAAc,4BAEjCG,YAAaJ,SAASC,cAAc,mBACpCI,UAAWL,SAASC,cAAc,2BAcpC,SAASK,IACPN,SAASO,KAAKC,UAAUC,OAAO,cAC/BC,OAAOC,oBAAoB,UAAWC,E,CASxC,SAASA,EAAWC,GAEH,WAAXA,EAAEC,MACJR,G,UAaWS,I,OAAAA,EAAfC,EAAAtB,EAAA,CAAAsB,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAElBC,E,2FAAkBC,EAAAC,QAAMC,IAC5B,GAASC,OAAN7B,GAAuB6B,OAAjB5B,GAA+B4B,OAAdL,EAAG,aAAwBK,OAAbC,EAAAC,aAAa,oB,OADjDN,EAASO,EAAAC,KAGfC,QAAQC,IAAIV,EAAUW,MACtBC,EAAoBZ,G,gDAEpBS,QAAQC,IAAIH,EAAAM,GAAMC,S,0DARKC,MAAAC,KAAAC,U,CAY3B,SAASL,EAAoBM,GAC3B,IASIC,EAAAD,EAAKP,KARPS,EAQED,EARFC,YACAC,EAOEF,EAPFE,MACAC,EAMEH,EANFG,aACAC,EAKEJ,EALFI,WACAC,EAIEL,EAJFK,WACAC,EAGEN,EAHFM,eACAC,EAEEP,EAFFO,UACAC,EACER,EADFQ,SAEFlB,QAAQC,IAAI,CACVU,cACAC,QACAC,eACAC,aACAC,aACAC,iBACAC,YACAC,aAEF,IAAMC,EAAS,8JAGmExB,OAApBgB,EAAY,UAI1BhB,OAJkCiB,EAAM,2KAQlCjB,OAJNiB,EAAM,6LAIkBjB,OAAlBkB,EAAa,OAIblB,OAJkBmB,EAAW,6LAQ7BnB,OAJAoB,EAAW,iMAQXpB,OAJAqB,EAAe,wLASZrB,OALHsB,EAAU,6NAKEtB,OAATuB,EAAS,gVAQlElD,EAAKO,UAAU6C,UAAYD,C,CA3G7BnD,EAAKC,mBAAmBoD,iBAAiB,SAMzC,WACEnD,SAASO,KAAKC,UAAU4C,IAAI,cAC5B1C,OAAOyC,iBAAiB,UAAWvC,E,IAPrCd,EAAKI,mBAAmBiD,iBAAiB,QAAS7C,GAClDR,EAAKK,SAASgD,iBAAiB,SAc/B,SAAyBtC,GACvBiB,QAAQC,IAAI,SACZD,QAAQC,IAAIlB,EAAEwC,eACdvB,QAAQC,IAAIlB,EAAEyC,O,IAhBNxD,EAALM,YAAY+C,iBAAiB,SA2BlC,SAAyBtC,GAEvB,IAAM0C,EAAU1C,EAAEyC,OAAOE,QAAQ,MACjC1B,QAAQC,IAAIwB,EAAQnC,I,SAKMA,GAAbL,EAAYqB,MAAAC,KAAAC,U,CAJzBmB,CAAaF,EAAQnC,G","sources":["src/js/modal-movie.js"],"sourcesContent":["import axios from 'axios';\nimport { API_KEY_TMDb } from './consts/api_key.js';\n\nconst URL = 'https://api.themoviedb.org/3';\nconst GET_MOVIE_INFO = '/movie/';\n\nconst refs = {\n  openModalMovieCard: document.querySelector('[modal-movie-open]'),\n  closeModalMovieBtn: document.querySelector('[modal-movie-close]'),\n  backdrop: document.querySelector('.js-modalMovie__backdrop'),\n\n  targetMovie: document.querySelector('.movie__gallery'),\n  modalCard: document.querySelector('.modalMovie__container'),\n};\n\nrefs.openModalMovieCard.addEventListener('click', onModalMovieOpen);\nrefs.closeModalMovieBtn.addEventListener('click', onModalMovieClose);\nrefs.backdrop.addEventListener('click', onBackdropClose); // не работает\nrefs.targetMovie.addEventListener('click', createMovieCard);\n\n// Open/Close Modal\nfunction onModalMovieOpen() {\n  document.body.classList.add('show-modal');\n  window.addEventListener('keydown', onEscPress);\n}\n\nfunction onModalMovieClose() {\n  document.body.classList.remove('show-modal');\n  window.removeEventListener('keydown', onEscPress);\n}\n\nfunction onBackdropClose(e) {\n  console.log('click');\n  console.log(e.currentTarget);\n  console.log(e.target);\n}\n\nfunction onEscPress(e) {\n  // console.log(e.code);\n  if (e.code === 'Escape') {\n    onModalMovieClose();\n  }\n}\n// Create movieCard\n\nfunction createMovieCard(e) {\n  // if (e.target.closest('li.movie__gallery--items'));\n  const idMovie = e.target.closest('li');\n  console.log(idMovie.id);\n  MovieApiById(idMovie.id);\n  // createMovieCardById(idMovie);\n}\n\nasync function MovieApiById(id) {\n  try {\n    const movieInfo = await axios.get(\n      `${URL}${GET_MOVIE_INFO}${id}?api_key=${API_KEY_TMDb}&language=en-US`\n    );\n    console.log(movieInfo.data);\n    createMovieCardById(movieInfo);\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction createMovieCardById(item) {\n  const {\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genre_ids,\n    overview,\n  } = item.data;\n  console.log({\n    poster_path,\n    title,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    genre_ids,\n    overview,\n  });\n  const markup = `\n        <div class=\"movie__poster\">\n                <picture class=\"movie__poster--img\">\n                    <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=${title} class=\"movie-poster__img\" />\n                </picture>\n            </div>\n            <div class=\"movie__about\">\n                <h2 class=\"movie__about--title\">${title}</h2>\n                <table>\n                    <tr>\n                        <td class=\"movie__table-menu\">Vote / Votes</td>\n                        <td class=\"movie__table-data\">${vote_average} / ${vote_count}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie__table-menu\">Popularity</td>\n                        <td class=\"movie__table-data\">${popularity}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie__table-menu\">Original Title</td>\n                        <td class=\"movie__table-data\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie__table-menu\">Genre</td>\n                        <td class=\"movie__table-data\">${genre_ids} исправить</td>\n                    </tr>\n                </table>\n                <div>\n                    <h3 class=\"movie__about--subtitle\">About</h3>\n                    <p class=\"modal__about--discription\">${overview}</p>\n                </div>\n                <div class=\"modal__buttons\">\n                    <button class=\"modal__button button-watched\" type=\"button\">add to Watched</button>\n                    <button class=\"modal__button button-queue\" type=\"button\">add to queue</button>\n                </div>\n            </div>\n        `;\n  refs.modalCard.innerHTML = markup;\n}\n"],"names":["$bpxeT","parcelRequire","$6e635b73d6bcb8f3$var$URL","$6e635b73d6bcb8f3$var$GET_MOVIE_INFO","$6e635b73d6bcb8f3$var$refs","openModalMovieCard","document","querySelector","closeModalMovieBtn","backdrop","targetMovie","modalCard","$6e635b73d6bcb8f3$var$onModalMovieClose","body","classList","remove","window","removeEventListener","$6e635b73d6bcb8f3$var$onEscPress","e","code","$6e635b73d6bcb8f3$var$_MovieApiById","$parcel$interopDefault","$2TvXO","mark","_callee","id","movieInfo","$dIxxU","default","get","concat","$2JYat","API_KEY_TMDb","_ctx","sent","console","log","data","$6e635b73d6bcb8f3$var$createMovieCardById","t0","message","apply","this","arguments","item","_data","poster_path","title","vote_average","vote_count","popularity","original_title","genre_ids","overview","markup","innerHTML","addEventListener","add","currentTarget","target","idMovie","closest","$6e635b73d6bcb8f3$var$MovieApiById"],"version":3,"file":"library.0a54f3b0.js.map"}