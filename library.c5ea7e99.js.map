{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAIA,MAGMC,EAAO,CACTC,mBAAoBC,SAASC,cAAc,sBAC3CC,mBAAoBF,SAASC,cAAc,uBAC3CE,SAAUH,SAASC,cAAc,4BAEjCG,YAAaJ,SAASC,cAAc,mBACpCI,UAAWL,SAASC,cAAc,2BAetC,SAASK,IACLN,SAASO,KAAKC,UAAUC,OAAO,cAC/BC,OAAOC,oBAAoB,UAAWC,E,CAU1C,SAASA,EAAWC,GAED,WAAXA,EAAEC,MACFR,G,CA1BRR,EAAKC,mBAAmBgB,iBAAiB,SAMzC,WACIf,SAASO,KAAKC,UAAUQ,IAAI,cAC5BN,OAAOK,iBAAiB,UAAWH,E,IAPvCd,EAAKI,mBAAmBa,iBAAiB,QAAST,GAClDR,EAAKK,SAASY,iBAAiB,SAe/B,SAAyBF,GACrBI,QAAQC,IAAI,SACZD,QAAQC,IAAIL,EAAEM,eACdF,QAAQC,IAAIL,EAAEO,O,IAjBRtB,EAALM,YAAYW,iBAAiB,SA4BlC,SAAyBF,GAErB,MAAMQ,EAAUR,EAAEO,OAAOE,QAAQ,MACjCL,QAAQC,IAAIG,EAAQE,IAKxBC,eAA4BD,GAExB,IACI,MAAME,QAAkB7B,EAAA8B,QAAMC,IAAI,sCAA0BJ,aAAcK,EAAAC,+BAC1EZ,QAAQC,IAAIO,EAAUK,MAO9B,SAA6BC,GACzB,MAAMC,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYC,WAAEA,EAAUC,WAAEA,EAAUC,eAAEA,EAAcC,UAAEA,EAASC,SAAEA,GAAaR,EAAKD,KAC/Gb,QAAQC,IAAI,C,YAAEc,E,MAAaC,E,aAAOC,E,WAAcC,E,WAAYC,E,eAAYC,E,UAAgBC,E,SAAWC,IACnG,MAAMC,EAAS,8JAG6CR,UAAoBC,2KAIlCA,6LAIMC,OAAkBC,6LAIlBC,iMAIAC,wLAIAC,6NAKGC,gVAQvDzC,EAAKO,UAAUoC,UAAYD,C,CA7CvBE,CAAoBjB,E,CACtB,MAAOkB,GACP1B,QAAQC,IAAIyB,EAAMC,Q,EAXpBC,CAAaxB,EAAQE,G","sources":["src/js/modal-movie.js"],"sourcesContent":["import axios from 'axios';\nimport { API_KEY_TMDb } from './consts/api_key.js';\n\n\nconst URL = 'https://api.themoviedb.org/3';\nconst GET_MOVIE_INFO = '/movie/';\n\nconst refs = {\n    openModalMovieCard: document.querySelector('[modal-movie-open]'),\n    closeModalMovieBtn: document.querySelector('[modal-movie-close]'),\n    backdrop: document.querySelector('.js-modalMovie__backdrop'),\n    \n    targetMovie: document.querySelector('.movie__gallery'),\n    modalCard: document.querySelector('.modalMovie__container'),\n}\n\n\nrefs.openModalMovieCard.addEventListener('click', onModalMovieOpen);\nrefs.closeModalMovieBtn.addEventListener('click', onModalMovieClose);\nrefs.backdrop.addEventListener('click', onBackdropClose); // не работает\nrefs.targetMovie.addEventListener('click', createMovieCard);\n\n// Open/Close Modal\nfunction onModalMovieOpen() {\n    document.body.classList.add('show-modal');\n    window.addEventListener('keydown', onEscPress);\n}\n\nfunction onModalMovieClose() {\n    document.body.classList.remove('show-modal');\n    window.removeEventListener('keydown', onEscPress);\n    \n}\n\nfunction onBackdropClose(e) {\n    console.log(\"click\");\n    console.log(e.currentTarget);\n    console.log(e.target);\n}    \n\nfunction onEscPress(e) {\n    // console.log(e.code);\n    if (e.code === 'Escape') {\n        onModalMovieClose();\n    }\n}\n// Create movieCard\n\nfunction createMovieCard(e) {\n    // if (e.target.closest('li.movie__gallery--items'));\n    const idMovie = e.target.closest('li');\n    console.log(idMovie.id);\n    MovieApiById(idMovie.id);\n    // createMovieCardById(idMovie);\n}\n\nasync function MovieApiById(id) {\n  \n    try {\n        const movieInfo = await axios.get(`${URL}${GET_MOVIE_INFO}${id}?api_key=${API_KEY_TMDb}&language=en-US`);\n        console.log(movieInfo.data);\n        createMovieCardById(movieInfo)\n    } catch (error) {\n      console.log(error.message);\n    }\n}\n\nfunction createMovieCardById(item) {\n    const { poster_path, title, vote_average, vote_count, popularity, original_title, genre_ids, overview } = item.data;\n    console.log({ poster_path, title, vote_average, vote_count, popularity, original_title, genre_ids, overview });\n    const markup = `\n        <div class=\"movie__poster\">\n                <picture class=\"movie__poster--img\">\n                    <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=${title} class=\"movie-poster__img\" />\n                </picture>\n            </div>\n            <div class=\"movie__about\">\n                <h2 class=\"movie__about--title\">${title}</h2>\n                <table>\n                    <tr>\n                        <td class=\"movie__table-menu\">Vote / Votes</td>\n                        <td class=\"movie__table-data\">${vote_average} / ${vote_count}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie__table-menu\">Popularity</td>\n                        <td class=\"movie__table-data\">${popularity}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie__table-menu\">Original Title</td>\n                        <td class=\"movie__table-data\">${original_title}</td>\n                    </tr>\n                    <tr>\n                        <td class=\"movie__table-menu\">Genre</td>\n                        <td class=\"movie__table-data\">${genre_ids} исправить</td>\n                    </tr>\n                </table>\n                <div>\n                    <h3 class=\"movie__about--subtitle\">About</h3>\n                    <p class=\"modal__about--discription\">${overview}</p>\n                </div>\n                <div class=\"modal__buttons\">\n                    <button class=\"modal__button button-watched\" type=\"button\">add to Watched</button>\n                    <button class=\"modal__button button-queue\" type=\"button\">add to queue</button>\n                </div>\n            </div>\n        `;\n    refs.modalCard.innerHTML = markup;\n}\n"],"names":["$2shzp","parcelRequire","$ddf1b7119a1bbad7$var$refs","openModalMovieCard","document","querySelector","closeModalMovieBtn","backdrop","targetMovie","modalCard","$ddf1b7119a1bbad7$var$onModalMovieClose","body","classList","remove","window","removeEventListener","$ddf1b7119a1bbad7$var$onEscPress","e","code","addEventListener","add","console","log","currentTarget","target","idMovie","closest","id","async","movieInfo","default","get","$OemQu","API_KEY_TMDb","data","item","poster_path","title","vote_average","vote_count","popularity","original_title","genre_ids","overview","markup","innerHTML","$ddf1b7119a1bbad7$var$createMovieCardById","error","message","$ddf1b7119a1bbad7$var$MovieApiById"],"version":3,"file":"library.c5ea7e99.js.map"}