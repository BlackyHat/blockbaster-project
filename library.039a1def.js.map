{"mappings":"imBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,qJCAzDH,EAAA,S,0DCAAI,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,YDS5F,EAAAC,EAAAC,gBAEA,MAAMC,EAAYC,SAASC,cAAc,eAiBzC,SAASC,EAAUC,GACjB,MAAMC,EAAOC,aAAaC,QAAQH,GAClC,OAAIC,EAAahB,KAAKC,MAAMe,GACrB,E,CAGT,SAASG,EAAaH,GACpB,MAAMI,EAASJ,EACZK,KAAIC,IACH,MAAMC,EAAO,IAAIC,KAAKF,EAAGG,cACzB,IAAIC,EAAa,GAgBjB,OAdKJ,EAAGK,QAAQjC,OAWdgC,EAAaJ,EAAGK,OAAON,KAAI,EAACO,KAAEA,KAAWA,KAVzCN,EAAGO,UAAUC,SAAQC,IACPC,gBAAgBC,iBAAiBN,OACzCG,SAAQ,EAACnC,GAAEA,EAAEiC,KAAEA,MACbjC,IAAOoC,GACTL,EAAWQ,KAAKN,EAAK,GAEvB,IAEJF,EAAaA,EAAWS,MAAM,EAAG,IAK5B,iCAAiCb,EAAG3B,2GAG3B2B,EAAGc,kKAIgBd,EAAGe,8EAGxBX,EAAWY,KAAK,WAAWf,EAAKgB,kGAKxC,IAEPD,KAAK,IAEFE,EAAe5B,SAASC,cAAc,mBACtC4B,EAAS,2FAA2FvC,2CAC1GsC,EAAaE,UAAYtB,GAAkBqB,C,CA9D7CtB,EAAaL,EAAU,YAEvBH,EAAUgC,iBAAiB,SAASC,IAClC,MAAMC,EAASD,EAAIC,OAAOC,QAAQ,UAClC,IAAKD,EAAQ,OAAO,EAEpB,MAAME,EAAYF,EAAOG,QAAQjC,KACjC8B,EACGC,QAAQ,MACRjC,cAAc,cACdoC,UAAUC,OAAO,aACpBL,EAAOI,UAAUE,IAAI,aACrBhC,EAAaL,EAAUiC,GAAW,IAsDlCK,OAAOT,iBAAiB,WAAWC,IACjC,MAAMG,EAAYnC,SAASC,cAAc,0BAA0BmC,QAChEjC,KAEc,eAAb6B,EAAI5B,MACNG,EAAaL,EAAUiC,GAAW,KAOxC,EAAAM,EAAAC,YACAF,OAAOT,iBAAiB,SAAUU,EAAAC","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-ab034d90fa2963dc.js","src/library.js","node_modules/@parcel/runtime-js/lib/runtime-9d956c555ad745fe.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.039a1def.js\\\",\\\"lqWPf\\\":\\\"no-films.bd757f1e.png\\\",\\\"eM9ss\\\":\\\"library.eee77cd5.js\\\"}\"));","import './js/blinking-heart.js';\nimport './js/dark-mode';\n\nimport { hidePreloder, showPreloder } from './js/preloder';\nimport { scrollUp } from './js/scrollToTop.js';\n\nimport './js/modal-movie.js';\nimport * as noFilms from './img/no-films.png';\n\nhidePreloder();\n\nconst filterRef = document.querySelector('.js-filters');\n\ncreateMarkup(getMovies('watched'));\n\nfilterRef.addEventListener('click', evt => {\n  const target = evt.target.closest('button');\n  if (!target) return false;\n\n  const movieType = target.dataset.type;\n  target\n    .closest('ul')\n    .querySelector('.is-active')\n    .classList.remove('is-active');\n  target.classList.add('is-active');\n  createMarkup(getMovies(movieType));\n});\n\nfunction getMovies(type) {\n  const data = localStorage.getItem(type);\n  if (data) return JSON.parse(data);\n  return [];\n}\n\nfunction createMarkup(data) {\n  const markup = data\n    .map(el => {\n      const date = new Date(el.release_date);\n      let genres_ids = [];\n      // //\n      if (!el.genres?.length) {\n        el.genre_ids.forEach(el => {\n          const arr = filmsApiService.genres_ids_array.genres;\n          arr.forEach(({ id, name }) => {\n            if (id === el) {\n              genres_ids.push(name);\n            }\n          });\n        });\n        genres_ids = genres_ids.slice(0, 2);\n      } else {\n        genres_ids = el.genres.map(({ name }) => name);\n      }\n      //\n      return `<li class=\"gallery__item\" id=\"${el.id}\">\n            <a class=\"film-card\"\">\n                    <img src=\"https://image.tmdb.org/t/p/w500/${\n                      el.poster_path\n                    }\" \n                        class=\"film-poster__img\" loading=\"lazy\" />\n                <div class=\"info\"\">\n                <p class=\"info__title\">${el.title}</p>\n\n                  <p class=\"info__genres\">\n                  ${genres_ids.join(', ')} | ${date.getFullYear()} \n        \n               </p>\n            </div>\n            </a>\n      </li>`;\n    })\n    .join('');\n\n  const movieGallery = document.querySelector('.movie__gallery');\n  const noData = `<p class=\"my-lib__title\">Try to add some movies...</p> <img class=\"my-lib__poster\" src=\"${noFilms}\" alt=\"no film informatin\" width=\"640\">`;\n  movieGallery.innerHTML = markup ? markup : noData;\n}\n\nconst handleCloseModal = () => {\n  window.addEventListener('message', evt => {\n    const movieType = document.querySelector('.js-filters .is-active').dataset\n      .type;\n\n    if (evt.data === 'closeModal') {\n      createMarkup(getMovies(movieType));\n    }\n  });\n};\n\nhandleCloseModal();\n\nscrollUp();\nwindow.addEventListener('scroll', scrollUp);\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lqWPf\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$68b9e1600a2e381c$exports","URL","resolve","import","meta","url","toString","$7NN9c","hidePreloder","$ce3726a01b8ab25a$var$filterRef","document","querySelector","$ce3726a01b8ab25a$var$getMovies","type","data","localStorage","getItem","$ce3726a01b8ab25a$var$createMarkup","markup","map","el1","date","Date","release_date","genres_ids","genres","name","genre_ids","forEach","el","filmsApiService","genres_ids_array","push","slice","poster_path","title","join","getFullYear","movieGallery","noData","innerHTML","addEventListener","evt","target","closest","movieType","dataset","classList","remove","add","window","$h0oKa","scrollUp"],"version":3,"file":"library.039a1def.js.map"}